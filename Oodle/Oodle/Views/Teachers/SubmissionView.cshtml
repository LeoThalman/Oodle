@model Oodle.Models.ViewModels.TeacherVM

@{
    ViewBag.Title = "SubmissionView";
}

<h2>Submissions</h2>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
    <style type="text/css">
        body {
            font-family: Arial;
            font-size: 10pt;
        }

        table {
            border: 1px solid #ccc;
            border-collapse: collapse;
            background-color: #fff;
        }

            table th {
                background-color: #B8DBFD;
                color: #333;
                font-weight: bold;
            }

            table th, table td {
                padding: 5px;
                border: 1px solid #ccc;
            }

            table, table table td {
                border: 0px solid #ccc;
            }
    </style>
</head>
@using (Html.BeginForm("DownloadFile", "Students", FormMethod.Post))
{
    <input type="hidden" id="hfFileId" name="FileId" />
    <input type="submit" id="btnDownload" value="Download" style="display:none" />
}
<hr />
<table cellpadding="0" cellspacing="0">
    <tr>
        <th style="width:50px">Student</th>
        <th style="width:120px">File Name</th>
        <th style="width:80px">Download</th>
    </tr>
    @if (Model.documents.Count() > 0)
    {
        for (int i = 0; i < Model.documents.Count(); i++)
        {
            var file = Model.documents[i];
            var user = Model.users[i];


            <tr>
                <td>@user.UserName</td>
                <td>@file.Name</td>
                <td><a href="javascript:;" onclick="DownloadFile(@file.Id)">Download</a></td>
            </tr>
        }
    }
    else
    {
        <tr>
            <td colspan="3">&nbsp;</td>
        </tr>
    }
</table>
<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<script type="text/javascript">
    function DownloadFile(fileId) {
        $("#hfFileId").val(fileId);
        $("#btnDownload")[0].click();
    };
</script>
